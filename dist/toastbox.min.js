/**
 * Toastbox.js â€” alert, confirm, prompt, and flexible dialogs for the Bootstrap 5 framework
 * @version: 1.0.0
 * @project: https://github.com/awesometoast/toastbox
 * @license: MIT
 */
((e,t)=>{'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?module.exports=t():e.toastbox=t()})(this,function e(u){let r={};r.VERSION='1.0.0';let i={en:{OK:'OK',CANCEL:'Cancel',CONFIRM:'OK'}},p={dialog:'<div class="toastbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="toastbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="toastbox-close-button close btn-close" aria-hidden="true" aria-label="Close"></button>',form:'<form class="toastbox-form"></form>',button:'<button type="button" class="btn"></button>',option:'<option value=""></option>',promptMessage:'<div class="toastbox-prompt-message"></div>',inputs:{text:'<input class="toastbox-input toastbox-input-text form-control" autocomplete="off" type="text">',textarea:'<textarea class="toastbox-input toastbox-input-textarea form-control"></textarea>',email:'<input class="toastbox-input toastbox-input-email form-control" autocomplete="off" type="email">',select:'<select class="toastbox-input toastbox-input-select form-select"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input toastbox-input toastbox-input-checkbox" type="checkbox"></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input toastbox-input toastbox-input-radio" type="radio" name="toastbox-radio"></label></div>',date:'<input class="toastbox-input toastbox-input-date form-control" autocomplete="off" type="date">',time:'<input class="toastbox-input toastbox-input-time form-control" autocomplete="off" type="time">',number:'<input class="toastbox-input toastbox-input-number form-control" autocomplete="off" type="number">',password:'<input class="toastbox-input toastbox-input-password form-control" autocomplete="off" type="password">',range:'<input class="toastbox-input toastbox-input-range form-control-range" autocomplete="off" type="range">'}},d={locale:'en',backdrop:'static',animate:!0,className:null,closeButton:!0,show:!0,container:'body',value:'',inputType:'text',errorMessage:null,swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1,relatedTarget:null,size:null,id:null};function b(e){var t=document.createElement('template');return t.innerHTML=e.trim(),t.content.firstChild}function n(e){return e&&'object'==typeof e&&!Array.isArray(e)}function s(e,t,o){return function e(t,...o){if(!o.length)return t;var a=o.shift();if(n(t)&&n(a))for(var r in a)n(a[r])?(t[r]||Object.assign(t,{[r]:{}}),e(t[r],a[r])):Object.assign(t,{[r]:a[r]});return e(t,...o)}({},e,((e,t)=>{var o=e.length;let a={};if(o<1||2<o)throw new Error('Invalid argument length');return 2===o||'string'==typeof e[0]?(a[t[0]]=e[0],a[t[1]]=e[1]):a=e[0],a})(t,o))}function c(e,t,a,r){let o;e={className:'toastbox-'+e,buttons:((o,a)=>{var r={};for(let e=0,t=o.length;e<t;e++){var n=o[e],s=n.toLowerCase(),n=n.toUpperCase();r[s]={label:((e,t)=>((t=i[t])||i.en)[e])(n,a)}}return r})(t=r&&r[0]&&(o=r[0].locale||d.locale,r[0].swapButtonOrder||d.swapButtonOrder)?t.reverse():t,o)};d.className&&(e.className=e.className+' '+d.className);{e=s(e,r,a);var n=t;let o={};return f(n,function(e,t){o[t]=!0}),f(e.buttons,function(e){if(o[e]===u)throw new Error('button key "'+e+'" is not allowed (options are '+n.join(' ')+')')}),e}}function m(e){return Object.keys(e).length}function f(t,o){let a=0;Array.isArray(t)?t.forEach(function(e,t){o(t,e,a++)}):Object.keys(t).forEach(function(e){o(e,t[e],a++)})}function h(e,t){t=t.querySelector('.toastbox-accept');t&&t.focus()}function w(e,t,o){e.stopPropagation(),e.preventDefault(),'function'==typeof o&&!1===o.call(t,e)||(o=bootstrap.Modal.getInstance(t))&&o.hide()}function y(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function v(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}return r.locales=function(e){return e?i[e]:i},r.addLocale=function(e,t){return['OK','CANCEL','CONFIRM'].forEach(function(e){if(!t[e])throw new Error('Please supply a translation for "'+e+'"')}),i[e]={OK:t.OK,CANCEL:t.CANCEL,CONFIRM:t.CONFIRM},r},r.removeLocale=function(e){if('en'===e)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete i[e],r},r.setLocale=function(e){return r.setDefaults('locale',e)},r.setDefaults=function(){let e={};return 2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],Object.assign(d,e),r},r.hideAll=function(){return document.querySelectorAll('.toastbox').forEach(function(e){e=bootstrap.Modal.getInstance(e);e&&e.hide()}),r},r.init=function(){return e()},r.dialog=function(e){if('undefined'==typeof bootstrap||!bootstrap.Modal)throw new Error('Bootstrap JavaScript library is not loaded. Please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/5.3/getting-started/introduction/ for more details.');if(e=(a=>{let r,n;if('object'!=typeof a)throw new Error('Please supply an object of options');if(a.message)return(a=Object.assign({},d,a)).backdrop?a.backdrop='string'!=typeof a.backdrop||'static'!==a.backdrop.toLowerCase()||'static':a.backdrop=!1!==a.backdrop&&0!==a.backdrop&&'static',a.buttons||(a.buttons={}),r=a.buttons,n=m(r),f(r,function(e,t,o){if('object'!=typeof(t='function'==typeof t?r[e]={callback:t}:t))throw new Error('button with key "'+e+'" must be an object');if(t.label||(t.label=e),!t.className){let e=!1;e=a.swapButtonOrder?0===o:o===n-1,n<=2&&e?t.className='btn-primary':t.className='btn-secondary'}}),a;throw new Error('"message" option must not be null or an empty string.')})(e),void 0===bootstrap.Tooltip||!bootstrap.Tooltip.VERSION)throw new Error('Unable to detect Bootstrap version. Toastbox requires Bootstrap 5.3.7 or higher.');e.fullBootstrapVersion=bootstrap.Tooltip.VERSION;var t=e.fullBootstrapVersion.indexOf('.'),t=(e.bootstrap=e.fullBootstrapVersion.substring(0,t),e.fullBootstrapVersion.split('.')),o=parseInt(t[0]),a=parseInt(t[1]),t=parseInt(t[2]);if(o<5||5===o&&a<3||5===o&&3===a&&t<7)throw new Error('Toastbox requires Bootstrap 5.3.7 or higher. You are using version '+e.fullBootstrapVersion+'. Please upgrade to Bootstrap 5.3.7 or later.');let r=b(p.dialog);var n=r.querySelector('.modal-dialog'),o=r.querySelector('.modal-body'),a=b(p.header);let s=b(p.footer);t=e.buttons;let i={onEscape:e.onEscape};var l,c=o.querySelector('.toastbox-body');if(e.message instanceof Element?c.appendChild(e.message):c.innerHTML=e.message,0<m(e.buttons)&&(f(t,function(e,t){var o=b(p.button);switch(o.setAttribute('data-bb-handler',e),o.classList.add(...t.className.split(' ').filter(e=>e.trim())),e){case'ok':case'confirm':o.classList.add('toastbox-accept');break;case'cancel':o.classList.add('toastbox-cancel')}o.innerHTML=t.label,t.id&&o.setAttribute('id',t.id),!0===t.disabled&&(o.disabled=!0),s.appendChild(o),i[e]=t.callback}),o.parentNode.insertBefore(s,o.nextSibling)),!0===e.animate&&r.classList.add('fade'),e.className&&r.classList.add(...e.className.split(' ').filter(e=>e.trim())),e.id&&r.setAttribute('id',e.id),e.size)switch(e.size){case'small':case'sm':n.classList.add('modal-sm');break;case'large':case'lg':n.classList.add('modal-lg');break;case'extra-large':case'xl':n.classList.add('modal-xl')}if(e.scrollable&&n.classList.add('modal-dialog-scrollable'),(e.title||e.closeButton)&&(e.title?(a.querySelector('.modal-title').innerHTML=e.title,a.classList.add('toastbox-has-title')):(a.classList.add('border-0'),'string'==typeof e.message&&e.className&&'toastbox-alert'===e.className.split(' ')[0]&&(t=a.querySelector('.modal-title'),(l=document.createElement('div')).className='toastbox-header-message',l.innerHTML=e.message,t.parentNode.replaceChild(l,t),c.innerHTML='',o.style.display='none',a.classList.add('toastbox-has-header-message'))),e.closeButton&&(l=b(p.closeButton),a.appendChild(l)),o.parentNode.insertBefore(a,o)),e.centerVertical&&n.classList.add('modal-dialog-centered'),e.reusable||(r.addEventListener('hide.bs.modal',function(e){e=e,r,e.target},{once:!0}),r.addEventListener('hidden.bs.modal',function(e){var t;e=e,t=r,e.target===t&&t.remove()},{once:!0})),e.onHide){if('function'!=typeof e.onHide)throw new Error('Argument supplied to "onHide" must be a function');r.addEventListener('hide.bs.modal',e.onHide)}if(e.onHidden){if('function'!=typeof e.onHidden)throw new Error('Argument supplied to "onHidden" must be a function');r.addEventListener('hidden.bs.modal',e.onHidden)}if(e.onShow){if('function'!=typeof e.onShow)throw new Error('Argument supplied to "onShow" must be a function');r.addEventListener('show.bs.modal',e.onShow)}if(r.addEventListener('shown.bs.modal',function(e){h(0,r)},{once:!0}),e.onShown){if('function'!=typeof e.onShown)throw new Error('Argument supplied to "onShown" must be a function');r.addEventListener('shown.bs.modal',e.onShown)}if(!0===e.backdrop){let t=!1;r.addEventListener('mousedown',function(e){e.target.closest('.modal-content')&&(e.stopPropagation(),t=!0)}),r.addEventListener('click',function(e){t||e.target!==e.currentTarget||r.dispatchEvent(new CustomEvent('escape.close.bb'))})}r.addEventListener('escape.close.bb',function(e){i.onEscape&&w(e,r,i.onEscape)}),r.addEventListener('click',function(e){var t=e.target.closest('.modal-footer button:not(.disabled)');t&&(t=t.getAttribute('data-bb-handler'))!==u&&w(e,r,i[t])}),r.addEventListener('click',function(e){e.target.closest('.toastbox-close-button')&&w(e,r,i.onEscape)}),r.addEventListener('keyup',function(e){27!==e.which&&'Escape'!==e.key||r.dispatchEvent(new CustomEvent('escape.close.bb'))});('string'==typeof e.container?document.querySelector(e.container):e.container).appendChild(r);t=new bootstrap.Modal(r,{backdrop:e.backdrop,keyboard:!1});return e.show&&t.show(e.relatedTarget),r._bsModal=t,r},r.alert=function(){let e;if((e=c('alert',['ok'],['message','callback'],arguments)).callback&&'function'!=typeof e.callback)throw new Error('alert requires the "callback" property to be a function when provided');return e.buttons.ok.callback=e.onEscape=function(){return'function'!=typeof e.callback||e.callback.call(this)},r.dialog(e)},r.confirm=function(){let e;if('function'!=typeof(e=c('confirm',['cancel','confirm'],['message','callback'],arguments)).callback)throw new Error('confirm requires a callback');return e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},r.dialog(e)},r.prompt=function(){let n,t;var e,o,s,a;let i,l;if(e=b(p.form),(n=c('prompt',['cancel','confirm'],['title','callback'],arguments)).value||(n.value=d.value),n.inputType||(n.inputType=d.inputType),o=(n.show===u?d:n).show,n.show=!1,n.buttons.cancel.callback=n.onEscape=function(){return n.callback.call(this,null)},n.buttons.confirm.callback=function(){let e;if('checkbox'===n.inputType){if(0===(e=Array.from(i.querySelectorAll('input:checked')).map(function(e){return e.value})).length&&!0===n.required)return!1}else if('radio'===n.inputType){var t=i.querySelector('input:checked');e=t?t.value:u}else{t=i;if(t.checkValidity&&!t.checkValidity())return n.errorMessage&&t.setCustomValidity(n.errorMessage),t.reportValidity&&t.reportValidity(),!1;e='select'===n.inputType&&!0===n.multiple?Array.from(i.querySelectorAll('option:selected')).map(function(e){return e.value}):i.value}return n.callback.call(this,e)},!n.title)throw new Error('prompt requires a title');if('function'!=typeof n.callback)throw new Error('prompt requires a callback');if(!p.inputs[n.inputType])throw new Error('Invalid prompt type');switch(i=b(p.inputs[n.inputType]),n.inputType){case'text':case'textarea':case'email':case'password':i.value=n.value,n.placeholder&&i.setAttribute('placeholder',n.placeholder),n.pattern&&i.setAttribute('pattern',n.pattern),n.maxlength&&i.setAttribute('maxlength',n.maxlength),n.required&&(i.required=!0),n.rows&&!isNaN(parseInt(n.rows))&&'textarea'===n.inputType&&i.setAttribute('rows',n.rows);break;case'date':case'time':case'number':case'range':if(i.value=n.value,n.placeholder&&i.setAttribute('placeholder',n.placeholder),n.pattern?i.setAttribute('pattern',n.pattern):'date'===n.inputType?i.setAttribute('pattern','d{4}-d{2}-d{2}'):'time'===n.inputType&&i.setAttribute('pattern','d{2}:d{2}'),n.required&&(i.required=!0),n.step){if(!('any'===n.step||!isNaN(n.step)&&0<parseFloat(n.step)))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');i.setAttribute('step',n.step)}((e,t,o)=>{let a=!1,r=!0,n=!0;if('date'===e)t===u||(r=v(t))?o===u||(n=v(o))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if('time'===e){if(t!==u&&!(r=y(t)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(o!==u&&!(n=y(o)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(t!==u&&isNaN(t))throw r=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(o!==u&&isNaN(o))throw n=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(r&&n){if(o<t)throw new Error('"max" must be greater than or equal to "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');a=!0}return a})(n.inputType,n.min,n.max)&&(n.min!==u&&i.setAttribute('min',n.min),n.max!==u)&&i.setAttribute('max',n.max);break;case'select':let r={};if(l=n.inputOptions||[],!Array.isArray(l))throw new Error('Please pass an array of input options');if(!l.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');n.required&&(i.required=!0),n.multiple&&(i.multiple=!0),f(l,function(e,t){let o=i;if(t.value===u||t.text===u)throw new Error('each option needs a "value" property and a "text" property');t.group&&(r[t.group]||(r[t.group]=document.createElement('optgroup'),r[t.group].setAttribute('label',t.group)),o=r[t.group]);var a=b(p.option);a.setAttribute('value',t.value),a.textContent=t.text,o.appendChild(a)}),f(r,function(e,t){i.appendChild(t)}),i.value=n.value;break;case'checkbox':let t=Array.isArray(n.value)?n.value:[n.value];if(!(l=n.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');(i=document.createElement('div')).className='toastbox-checkbox-list',f(l,function(e,o){if(o.value===u||o.text===u)throw new Error('each option needs a "value" property and a "text" property');let a=b(p.inputs[n.inputType]);a.querySelector('input').setAttribute('value',o.value),a.querySelector('label').appendChild(document.createTextNode('\n'+o.text)),f(t,function(e,t){t===o.value&&(a.querySelector('input').checked=!0)}),i.appendChild(a)});break;case'radio':if(n.value!==u&&Array.isArray(n.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(!(l=n.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');(i=document.createElement('div')).className='toastbox-radiobutton-list';let a=!0;f(l,function(e,t){if(t.value===u||t.text===u)throw new Error('each option needs a "value" property and a "text" property');var o=b(p.inputs[n.inputType]);o.querySelector('input').setAttribute('value',t.value),o.querySelector('label').appendChild(document.createTextNode('\n'+t.text)),n.value!==u&&t.value===n.value&&(o.querySelector('input').checked=!0,a=!1),i.appendChild(o)}),a&&(s=i.querySelector('input[type="radio"]'))&&(s.checked=!0)}return e.appendChild(i),e.addEventListener('submit',function(e){e.preventDefault(),e.stopPropagation();e=t.querySelector('.toastbox-accept');e&&e.click()}),n.message&&''!==n.message.trim()&&((a=b(p.promptMessage)).innerHTML=n.message,e.insertBefore(a,e.firstChild)),n.message=e,(t=r.dialog(n)).removeEventListener('shown.bs.modal',h),t.addEventListener('shown.bs.modal',function(){i.focus()}),!0===o&&(bootstrap.Modal.getInstance(t)||new bootstrap.Modal(t)).show(),t},r});